<!DOCTYPE html>
<html>
<head>
  <title>Analisi Video YouTube</title>
</head>
<body>
  <h2>Inserisci un link YouTube e invia per analizzarlo:</h2>
  <form id="youtubeForm">
    <!-- Campo input URL -->
    <input 
      type="url" 
      id="youtubeLink" 
      name="youtubeLink"
      placeholder="https://www.youtube.com/..." 
      required 
      pattern="https:\/\/(www\.)?youtube\.com\/watch\?v=.*" 
      size="50"
    >

    <!-- Campo prompt nascosto -->
    <textarea id="promptText" style="display:none;">
You are a meticulous YouTube video analyst and AI-native storytelling expert.

Given the video at this link, analyze it with the following goals:

1. **Content Breakdown**:
   - Summarize the main sections or themes of the video.
   - Highlight what happens in each part (chronological or logical order).
   - Identify any tools, platforms, or strategies shown.

2. **What You Learn About the Creator**:
   - Describe who is speaking, what they're working on, and what their current challenges or goals are.
   - Mention any context from previous efforts or days (if this is part of a series).
   - Extract their mindset, attitude, and work approach.

3. **Storytelling & Strategic Techniques**:
   - Point out storytelling structures used (e.g. hooks, loops, vulnerability, data).
   - Identify any community engagement efforts, challenges proposed, or high-conviction messages.
   - Analyze how the creator uses transparency, feedback, or personal branding.

4. **Progress from Previous Videos** (if applicable):
   - Mention how todayâ€™s video builds on prior content or shifts direction.
   - Identify actions taken, ideas validated, or systems implemented.

5. **Data Tracking & Metrics** (if visible):
   - Capture any progress updates: followers, revenue, tasks completed, obstacles faced.
   - Record anything measurable or useful for day-by-day tracking.

6. **TL;DR Summary**:
   - Provide a concise but rich 3-5 sentence summary of what this video contributes to the overall journey.

This information will be used to build a structured memory system and allow future retrieval across channels and creators.
    </textarea>

    <br><br>
    <button type="submit">Analizza</button>
  </form>

  <script>
    document.getElementById("youtubeForm").addEventListener("submit", function (e) {
      e.preventDefault();

      const videoUrl = document.getElementById("youtubeLink").value.trim();
const prompt = document.getElementById("promptText").value.trim();

const payload = {
  videoUrl, // <-- chiave corretta
  prompt
};

      fetch("https://n8n-4ghq.onrender.com/webhook/youtube-analysis", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(payload)
      })
      .then(response => {
        if (response.ok) {
          alert("Link inviato con successo!");
        } else {
          alert("Errore durante l'invio.");
        }
      });
    });
  </script>
</body>
</html>

